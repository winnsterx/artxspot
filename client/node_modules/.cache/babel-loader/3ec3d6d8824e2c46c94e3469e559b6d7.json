{"ast":null,"code":"import _slicedToArray from\"/Users/winker.xiao/webapps/metspot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{clientId,redirectUri}from\"./config\";import{Button,Layout,Row,Col}from\"antd\";import\"./App.less\";// Lightweight wrapper for Spotify Web API, see\n// https://github.com/JMPerez/spotify-web-api-js/blob/master/src/spotify-web-api.js\nimport Playlists from\"./components/Playlists\";// Declaring variables after importing everything\nvar Footer=Layout.Footer,Content=Layout.Content;// The ReactDOM is rendering <App/> in index.js\nfunction App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];useEffect(function(){if(token===\"\"&&window.location.hash!==\"\"){var hash=window.location.hash.substring(1).split(\"&\").reduce(function(initial,item){if(item){var parts=item.split(\"=\");initial[parts[0]]=decodeURIComponent(parts[1]);}return initial;},{});setToken(hash.access_token);}},[token]);function requestAccess(){console.log(\"Authorize request received.\");window.location.href=\"https://accounts.spotify.com/authorize?client_id=\"+clientId+\"&scope=playlist-read-private%20playlist-read-collaborative%20playlist-modify-public%20user-read-recently-played%20playlist-modify-private%20ugc-image-upload%20user-follow-modify%20user-follow-read%20user-library-read%20user-library-modify%20user-read-private%20user-read-email%20user-top-read%20user-read-playback-state&response_type=token&redirect_uri=\"+redirectUri;}return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},window.location.hash||token?/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Playlists,{token:token})):/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(Row,{type:\"flex\",justify:\"center\",align:\"middle\",style:{minHeight:\"100%\"}},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",style:{fontWeight:\"bold\"},size:\"large\",onClick:requestAccess},\"LOG IN WITH SPOTIFY\")))),/*#__PURE__*/React.createElement(Footer,{style:{textAlign:\"right\",backgroundColor:\"#1DA57A\",fontWeight:\"bold\",color:\"white\"}},\"For funzies, by @winnayx (2020)\")));}export default App;","map":{"version":3,"sources":["/Users/winker.xiao/webapps/metspot/src/App.js"],"names":["React","useState","useEffect","clientId","redirectUri","Button","Layout","Row","Col","Playlists","Footer","Content","App","token","setToken","window","location","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","access_token","requestAccess","console","log","href","minHeight","fontWeight","textAlign","backgroundColor","color"],"mappings":"yJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,UAAtC,CAEA,OAASC,MAAT,CAAiBC,MAAjB,CAAyBC,GAAzB,CAA8BC,GAA9B,KAAyC,MAAzC,CACA,MAAO,YAAP,CAEA;AACA;AAEA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CAEA;GACQC,CAAAA,M,CAAoBJ,M,CAApBI,M,CAAQC,O,CAAYL,M,CAAZK,O,CAEhB;AAEA,QAASC,CAAAA,GAAT,EAAe,eACaX,QAAQ,CAAC,EAAD,CADrB,wCACNY,KADM,eACCC,QADD,eAGbZ,SAAS,CAAC,UAAM,CACd,GAAIW,KAAK,GAAK,EAAV,EAAgBE,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAyB,EAA7C,CAAiD,CAC/C,GAAMA,CAAAA,IAAI,CAAGF,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CACVC,SADU,CACA,CADA,EAEVC,KAFU,CAEJ,GAFI,EAGVC,MAHU,CAGH,SAAUC,OAAV,CAAmBC,IAAnB,CAAyB,CAC/B,GAAIA,IAAJ,CAAU,CACR,GAAIC,CAAAA,KAAK,CAAGD,IAAI,CAACH,KAAL,CAAW,GAAX,CAAZ,CACAE,OAAO,CAACE,KAAK,CAAC,CAAD,CAAN,CAAP,CAAoBC,kBAAkB,CAACD,KAAK,CAAC,CAAD,CAAN,CAAtC,CACD,CACD,MAAOF,CAAAA,OAAP,CACD,CATU,CASR,EATQ,CAAb,CAWAP,QAAQ,CAACG,IAAI,CAACQ,YAAN,CAAR,CACD,CACF,CAfQ,CAeN,CAACZ,KAAD,CAfM,CAAT,CAiBA,QAASa,CAAAA,aAAT,EAAyB,CACvBC,OAAO,CAACC,GAAR,CAAY,6BAAZ,EACAb,MAAM,CAACC,QAAP,CAAgBa,IAAhB,CACE,oDACA1B,QADA,CAEA,mWAFA,CAGAC,WAJF,CAKD,CAED,mBACE,2BAAK,SAAS,CAAC,KAAf,EACGW,MAAM,CAACC,QAAP,CAAgBC,IAAhB,EAAwBJ,KAAxB,cACC,oBAAC,MAAD,mBACE,oBAAC,SAAD,EAAW,KAAK,CAAEA,KAAlB,EADF,CADD,cAKC,oBAAC,MAAD,mBACE,oBAAC,OAAD,mBAEE,oBAAC,GAAD,EACE,IAAI,CAAC,MADP,CAEE,OAAO,CAAC,QAFV,CAGE,KAAK,CAAC,QAHR,CAIE,KAAK,CAAE,CAAEiB,SAAS,CAAE,MAAb,CAJT,eAME,oBAAC,GAAD,mBACE,oBAAC,MAAD,EACE,IAAI,CAAC,SADP,CAEE,KAAK,CAAE,CACLC,UAAU,CAAE,MADP,CAFT,CAKE,IAAI,CAAC,OALP,CAME,OAAO,CAAEL,aANX,wBADF,CANF,CAFF,CADF,cAuBE,oBAAC,MAAD,EACE,KAAK,CAAE,CACLM,SAAS,CAAE,OADN,CAELC,eAAe,CAAE,SAFZ,CAGLF,UAAU,CAAE,MAHP,CAILG,KAAK,CAAE,OAJF,CADT,oCAvBF,CANJ,CADF,CA4CD,CAED,cAAetB,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { clientId, redirectUri } from \"./config\";\n\nimport { Button, Layout, Row, Col } from \"antd\";\nimport \"./App.less\";\n\n// Lightweight wrapper for Spotify Web API, see\n// https://github.com/JMPerez/spotify-web-api-js/blob/master/src/spotify-web-api.js\n\nimport Playlists from \"./components/Playlists\";\n\n// Declaring variables after importing everything\nconst { Footer, Content } = Layout;\n\n// The ReactDOM is rendering <App/> in index.js\n\nfunction App() {\n  const [token, setToken] = useState(\"\");\n\n  useEffect(() => {\n    if (token === \"\" && window.location.hash !== \"\") {\n      const hash = window.location.hash\n        .substring(1)\n        .split(\"&\")\n        .reduce(function (initial, item) {\n          if (item) {\n            var parts = item.split(\"=\");\n            initial[parts[0]] = decodeURIComponent(parts[1]);\n          }\n          return initial;\n        }, {});\n\n      setToken(hash.access_token);\n    }\n  }, [token]);\n\n  function requestAccess() {\n    console.log(\"Authorize request received.\");\n    window.location.href =\n      \"https://accounts.spotify.com/authorize?client_id=\" +\n      clientId +\n      \"&scope=playlist-read-private%20playlist-read-collaborative%20playlist-modify-public%20user-read-recently-played%20playlist-modify-private%20ugc-image-upload%20user-follow-modify%20user-follow-read%20user-library-read%20user-library-modify%20user-read-private%20user-read-email%20user-top-read%20user-read-playback-state&response_type=token&redirect_uri=\" +\n      redirectUri;\n  }\n\n  return (\n    <div className=\"App\">\n      {window.location.hash || token ? (\n        <Layout>\n          <Playlists token={token} />\n        </Layout>\n      ) : (\n        <Layout>\n          <Content>\n            {/* The style minHeight is necessary to ensure the row takes up the whole page */}\n            <Row\n              type=\"flex\"\n              justify=\"center\"\n              align=\"middle\"\n              style={{ minHeight: \"100%\" }}\n            >\n              <Col>\n                <Button\n                  type=\"primary\"\n                  style={{\n                    fontWeight: \"bold\",\n                  }}\n                  size=\"large\"\n                  onClick={requestAccess}\n                >\n                  LOG IN WITH SPOTIFY\n                </Button>\n              </Col>\n            </Row>\n          </Content>\n          <Footer\n            style={{\n              textAlign: \"right\",\n              backgroundColor: \"#1DA57A\",\n              fontWeight: \"bold\",\n              color: \"white\",\n            }}\n          >\n            For funzies, by @winnayx (2020)\n          </Footer>\n        </Layout>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}